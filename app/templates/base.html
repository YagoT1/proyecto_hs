<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Proyecto HS{% endblock %}</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome CDN para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Dark background for overall page */
            color: #e2e8f0; /* Light text color */
        }
        .navbar {
            background-color: #2d3748; /* Darker gray for navbar */
        }
        .footer {
            background-color: #2d3748; /* Darker gray for footer */
        }
        .flash-message {
            padding: 0.75rem 1.25rem;
            margin-bottom: 1rem;
            border: 1px solid transparent;
            border-radius: 0.25rem;
        }
        .flash-success {
            color: #155724;
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        .flash-error {
            color: #721c24;
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        .flash-info {
            color: #0c5460;
            background-color: #d1ecf1;
            border-color: #bee5eb;
        }
        /* Custom styles for action buttons in Dashboard.html if needed */
        .action-button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            text-align: center;
            transition: all 0.2s ease-in-out;
            text-decoration: none;
        }
        .btn-primary { background-color: #3B82F6; color: white; border: 1px solid #3B82F6; }
        .btn-primary:hover { background-color: #2563EB; transform: translateY(-2px); box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
        .btn-secondary { background-color: #60A5FA; color: white; border: 1px solid #60A5FA; }
        .btn-secondary:hover { background-color: #3B82F6; transform: translateY(-2px); box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
        .btn-tertiary { background-color: #A78BFA; color: white; border: 1px solid #A78BFA; }
        .btn-tertiary:hover { background-color: #8B5CF6; transform: translateY(-2px); box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
        .btn-info { background-color: #34D399; color: white; border: 1px solid #34D399; }
        .btn-info:hover { background-color: #10B981; transform: translateY(-2px); box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
    </style>
</head>
<body class="bg-gray-900 text-gray-100">
    <nav class="navbar p-4 shadow-md">
        <div class="container mx-auto flex justify-between items-center">
            <a href="{{ url_for('main.index') }}" class="text-2xl font-bold text-blue-400 hover:text-blue-300 transition-colors duration-200">Proyecto HS</a>
            <div class="space-x-4">
                {% if current_user.is_authenticated %}
                    <div class="relative inline-block text-left">
                        <button id="dropdownUserButton" class="text-gray-300 hover:text-white focus:outline-none focus:text-white px-3 py-2 rounded-md text-sm font-medium transition duration-200 ease-in-out">
                            {{ current_user.username }}
                            <svg class="inline-block w-4 h-4 ml-1 -mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                        </button>
                        <div id="dropdownUserMenu" class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none hidden z-50">
                            <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="dropdownUserButton">
                                <a href="{{ url_for('main.profile') }}" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200 ease-in-out">Perfil</a>
                                <a href="{{ url_for('main.registrar_horas') }}" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200 ease-in-out">Registrar Horas</a>
                                <a href="{{ url_for('main.ver_historial') }}" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200 ease-in-out">Historial</a>
                                <a href="{{ url_for('main.mis_recibos') }}" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white transition duration-200 ease-in-out">Mis Recibos</a>
                                {% if current_user.is_admin or current_user.is_owner or current_user.is_moderator %}
                                    <a href="{{ url_for('admin.admin_dashboard') }}" class="block px-4 py-2 text-blue-400 hover:bg-gray-700 hover:text-blue-300 transition duration-200 ease-in-out">Panel Admin</a>
                                {% endif %}
                                <a href="{{ url_for('auth.logout') }}" class="block px-4 py-2 text-red-400 hover:bg-gray-700 hover:text-red-300 transition duration-200 ease-in-out">Cerrar Sesión</a>
                            </div>
                        </div>
                    </div>
                {% else %}
                    <a href="{{ url_for('auth.login') }}" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition duration-200 ease-in-out">Iniciar Sesión</a>
                    <a href="{{ url_for('auth.register') }}" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition duration-200 ease-in-out">Registrarse</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <main class="container mx-auto mt-6 px-4">
        {% block content %}{% endblock %}
    </main>

    <script>
        // Dropdown menu functionality
        document.addEventListener('DOMContentLoaded', function() {
            const dropdownUserButton = document.getElementById('dropdownUserButton');
            const dropdownUserMenu = document.getElementById('dropdownUserMenu');

            if (dropdownUserButton && dropdownUserMenu) {
                dropdownUserButton.addEventListener('click', function() {
                    dropdownUserMenu.classList.toggle('hidden');
                });

                // Close the dropdown if the user clicks outside of it
                window.addEventListener('click', function(event) {
                    if (!dropdownUserButton.contains(event.target) && !dropdownUserMenu.contains(event.target)) {
                        dropdownUserMenu.classList.add('hidden');
                    }
                });
            }
        });
    </script>
</body>
</html>
